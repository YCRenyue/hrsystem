# 员工信息录入和登入功能需求分析

## 一、背景概述

基于项目需求说明书中的员工管理需求，本次实现重点关注员工信息的录入和登入功能，为后续的考勤、假期、薪酬等模块奠定基础。

## 二、核心功能需求分析

### 2.1 录入原有员工信息功能

**功能描述**：允许HR批量导入现有员工信息，并生成员工账户

- **输入方式**：Excel文件上传
- **数据验证**：需要验证数据格式和完整性
- **钉钉集成**：自动绑定员工钉钉账号，并发送系统账号信息
- **错误处理**：对不符合标准的数据进行反馈

**技术要求**：

- 文件上传处理
- Excel文件解析
- 数据格式验证
- 钉钉API集成
- 错误信息收集和反馈

### 2.2 录入新增员工信息功能

#### 2.2.1 HR预录入员工基础信息

**功能描述**：HR在员工入职前创建员工基础档案

- **输入方式**：HR后台管理界面录入
- **录入内容**：员工姓名、工号、入职日期等关键信息
- **目的**：为后续自动化流程提供基础数据，生成员工账号
- **状态管理**：标记为"待完善"状态

**技术要求**：

- 简化的员工信息录入表单
- 员工状态管理
- 自动生成员工ID
- 入职流程预设置

#### 2.2.2 入职当日自动推送登记表

**功能描述**：系统在员工入职当日自动推送入职登记表链接

- **触发条件**：基于入职日期的自动化任务
- **推送方式**：
  - 主要方式：钉钉工作消息推送
  - 备用方式：短信发送链接
  - 兜底方式：HR手动微信/电话通知
- **链接跳转**：跳转到系统员工信息完善界面
- **访问控制**：员工需登录账号后才能填写信息
- **表单内容**：完整的员工信息采集表单
- **链接安全**：带token验证的个人专属链接
- **数据补充**：员工登录后自主完善个人详细信息

**技术要求**：

- 定时任务调度
- 多渠道消息推送API（钉钉+短信）
- 动态表单生成
- 安全token机制
- 用户登录验证
- 数据加密和合并机制

#### 2.2.3 HR手动录入兜底机制

**功能描述**：当员工无法自主完成信息录入时的备用方案

- **触发场景**：员工未响应、技术问题、特殊情况
- **操作方式**：HR通过后台完整表单录入
- **数据处理**：直接录入完整员工信息
- **状态更新**：标记为"已完善"状态

**技术要求**：

- 完整的员工信息录入表单
- 权限控制和操作日志
- 数据验证和钉钉绑定
- 状态流转管理

### 2.3 员工登入功能

**功能描述**：员工通过钉钉账号登入系统

- **认证方式**：钉钉账号认证
- **权限控制**：三级权限体系（管理员/HR/员工）
- **个人信息**：员工可查看和编辑个人信息
- **界面适配**：支持PC和移动端
- **数据权限**：员工只能访问个人相关数据

**权限设计**：

- **管理员**：系统全局管理权限，用户管理，系统配置
- **HR**：员工信息管理，查看修改所有员工信息列表
- **员工**：个人信息查看和编辑，无法访问他人信息

**技术要求**：

- 钉钉OAuth认证
- 会话管理
- 三级权限控制系统
- 数据权限过滤
- 移动端适配
- 操作日志记录

## 三、数据库设计需求

### 3.1 员工表设计

基于现有Excel表格结构，需要包含以下关键字段：

- 员工ID（主键）
- 序号
- 公司编号（工号，唯一标识）
- 姓名（AES加密存储）
- 身份证号码（AES加密存储）
- 出生日期（AES加密存储）
- 性别（AES加密存储）
- 年龄（计算字段）
- 联系电话（AES加密存储）
- 邮箱地址
- 入职时间
- 转正日期
- 部门ID
- 岗位
- 工龄（计算字段）
- 员工状态（待完善/已完善/在职/离职/试用期）
- 备注
- 合同到期日
- 身份证复印件文件路径
- 保险所在公司
- 钉钉账号ID
- 数据完整性标记
- 创建人（HR用户ID）
- 创建时间
- 更新时间

### 3.2 入职流程表设计

- 流程ID（主键）
- 员工ID（外键）
- 流程状态（待推送/已推送/已完成/已超时）
- 推送方式（dingtalk_msg/sms/wechat_manual）
- 推送时间
- 完成时间
- 登记表链接（带token验证）
- 提醒次数
- 创建时间

### 3.3 权限管理表设计

- 权限ID（主键）
- 用户ID
- 用户类型（admin/hr/employee）
- 权限范围（department_id或all）
- 功能权限（JSON格式存储具体权限）
- 创建时间
- 更新时间

### 3.4 数据加密字段设计

需要加密的敏感信息：

- 身份证号码（AES-256加密）
- 联系电话（部分加密，中间4位）
- 银行卡号（如涉及薪酬）
- 家庭住址（如需要）

### 3.5 部门/分组表设计

- 部门ID（主键）
- 部门名称
- 上级部门
- 部门负责人
- 创建时间

## 四、钉钉集成需求

### 4.1 API集成点

- 用户信息获取API
- 组织架构API
- 消息推送API（入职登记表推送）
- OAuth认证API
- 工作通知API

### 4.2 数据同步

- 员工信息与钉钉账号绑定
- 组织架构同步
- 用户状态同步
- 入职流程状态同步

### 4.3 自动化任务

- 入职日期监控任务
- 登记表推送任务
- 完成状态检查任务
- 超时提醒任务

## 五、安全性和权限需求

### 5.1 数据安全

- **敏感信息加密**：身份证号码、银行卡号等使用AES-256加密
- **数据脱敏**：联系电话中间4位显示为*号
- **文件上传安全检查**：限制文件类型和大小
- **SQL注入防护**：使用参数化查询
- **传输安全**：HTTPS加密传输
- **数据备份**：定期自动备份重要数据

### 5.2 三级权限控制

- **管理员（Admin）**：

  - 系统配置管理
  - 用户权限管理
  - 数据库维护
  - 系统日志查看
  - 所有功能访问权限
- **HR人事**：

  - 员工信息录入、修改、查看
  - 员工信息列表管理
  - Excel批量导入
  - 入职流程管理
  - 部门管理
  - 报表查看和导出
- **员工（Employee）**：

  - 个人信息查看和编辑
  - 个人入职登记表填写
  - 个人考勤、假期等信息查看
  - 无法访问其他员工信息

### 5.3 数据访问控制

- **行级权限**：员工只能访问自己的数据记录
- **列级权限**：敏感字段根据角色显示不同内容
- **操作权限**：增删改查权限分级控制
- **审计日志**：记录所有敏感操作和数据变更

## 六、性能和可用性需求

### 6.1 性能要求

- Excel文件解析处理时间 < 30秒（1000条记录以内）
- 登入响应时间 < 2秒
- 表单提交响应时间 < 1秒

### 6.2 可用性要求

- 系统可用性 ≥ 99%
- 支持并发用户数 ≥ 100
- 数据备份和恢复机制

## 九、界面和用户体验需求

### 9.1 界面设计

- 响应式设计，支持PC和移动端
- 简洁直观的操作界面
- 清晰的错误提示和成功反馈
- 流程状态可视化展示

### 9.2 用户体验

- 一键式Excel导入
- 实时表单验证
- 批量操作支持
- 进度条显示
- 智能表单预填充
- 移动端友好的登记表
