{
  "total": 0,
  "passed": 0,
  "failed": 0,
  "skipped": 0,
  "duration": 0,
  "tests": [
    {
      "name": "è®¤è¯æ¨¡å—æµ‹è¯•",
      "error": "Command failed: npx jest C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\auth.test.js --json --coverage=false\n  console.log\n    [dotenv@17.2.3] injecting env (13) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.warn\n    [2025-12-05T14:27:47.259Z] [WARN] DingTalk credentials not configured. Notification features will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/DingTalkService.js:26:14)\n      at Object.<anonymous> (src/services/DingTalkService.js:294:18)\n      at Object.require (src/services/NotificationService.js:13:25)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/auth.test.js:7:13)\n\n  console.warn\n    [2025-12-05T14:27:47.268Z] [WARN] Email configuration not found. Email notifications will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/NotificationService.js:31:14)\n      at Object.<anonymous> (src/services/NotificationService.js:462:18)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/auth.test.js:7:13)\n\n  console.log\n    Setting up test environment...\n\n      at Object.log (src/__tests__/setup.js:14:11)\n\n  console.log\n    HR System backend running on port 3001\n\n      at Server.log (src/app.js:83:11)\n\n  console.log\n    Environment: test\n\n      at Server.log (src/app.js:84:11)\n\n  console.log\n    Database connection established successfully.\n\n      at log (src/config/database.js:33:13)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Username and password are required',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.log\n    Cleaning up test environment...\n\n      at Object.log (src/__tests__/setup.js:19:11)\n\nFAIL src/__tests__/auth.test.js\n  Authentication API\n    POST /api/auth/login\n      Ã— should login with valid credentials (73 ms)\n      âˆš should reject invalid username (16 ms)\n      âˆš should reject invalid password (19 ms)\n      âˆš should validate request body (13 ms)\n      Ã— should update last_login_at on successful login (19 ms)\n      âˆš should handle account lockout after failed attempts (547 ms)\n    POST /api/auth/logout\n      Ã— should logout successfully (14 ms)\n    JWT Token Validation\n      Ã— should accept valid JWT token (15 ms)\n      âˆš should reject invalid JWT token (15 ms)\n      âˆš should reject expired JWT token (16 ms)\n      âˆš should reject missing JWT token (10 ms)\n    Password Security\n      âˆš should hash passwords with bcrypt (68 ms)\n      âˆš should verify password correctly (194 ms)\n    Role-Based Access Control\n      Ã— should allow admin to access all resources (14 ms)\n      Ã— should enforce hr role permissions (12 ms)\n    Health Check\n      âˆš should return OK status (13 ms)\n\n  â— Authentication API â€º POST /api/auth/login â€º should login with valid credentials\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 401\n\n    \u001b[0m \u001b[90m 32 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 34 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 35 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 36 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 37 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'user'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/auth.test.js:34:31)\n\n  â— Authentication API â€º POST /api/auth/login â€º should update last_login_at on successful login\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 401\n\n    \u001b[0m \u001b[90m 83 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 85 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n     \u001b[90m 87 |\u001b[39m       \u001b[90m// Fetch user and verify last_login_at is set\u001b[39m\n     \u001b[90m 88 |\u001b[39m       \u001b[36mconst\u001b[39m user \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mUser\u001b[39m\u001b[33m.\u001b[39mfindOne({ where\u001b[33m:\u001b[39m { username\u001b[33m:\u001b[39m \u001b[32m'admin'\u001b[39m } })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/auth.test.js:85:31)\n\n  â— Authentication API â€º POST /api/auth/logout â€º should logout successfully\n\n    TypeError: Cannot read properties of undefined (reading 'token')\n\n    \u001b[0m \u001b[90m 141 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 142 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 143 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoken\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 144 |\u001b[39m\n     \u001b[90m 145 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 146 |\u001b[39m         \u001b[33m.\u001b[39mpost(\u001b[32m'/api/auth/logout'\u001b[39m)\u001b[0m\n\n      at Object.token (src/__tests__/auth.test.js:143:45)\n\n  â— Authentication API â€º JWT Token Validation â€º should accept valid JWT token\n\n    TypeError: Cannot read properties of undefined (reading 'token')\n\n    \u001b[0m \u001b[90m 161 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 163 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoken\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 164 |\u001b[39m\n     \u001b[90m 165 |\u001b[39m       \u001b[90m// Try to access protected route\u001b[39m\n     \u001b[90m 166 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[0m\n\n      at Object.token (src/__tests__/auth.test.js:163:45)\n\n  â— Authentication API â€º Role-Based Access Control â€º should allow admin to access all resources\n\n    TypeError: Cannot read properties of undefined (reading 'token')\n\n    \u001b[0m \u001b[90m 234 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 235 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 236 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoken\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 237 |\u001b[39m\n     \u001b[90m 238 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 239 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/employees'\u001b[39m)\u001b[0m\n\n      at Object.token (src/__tests__/auth.test.js:236:45)\n\n  â— Authentication API â€º Role-Based Access Control â€º should enforce hr role permissions\n\n    TypeError: Cannot read properties of undefined (reading 'token')\n\n    \u001b[0m \u001b[90m 251 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 252 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 253 |\u001b[39m       \u001b[36mconst\u001b[39m token \u001b[33m=\u001b[39m loginResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoken\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 254 |\u001b[39m\n     \u001b[90m 255 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 256 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/employees'\u001b[39m)\u001b[0m\n\n      at Object.token (src/__tests__/auth.test.js:253:45)\n\nTest Suites: 1 failed, 1 total\nTests:       6 failed, 10 passed, 16 total\nSnapshots:   0 total\nTime:        2.335 s, estimated 3 s\nRan all test suites matching C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\auth.test.js.\n\nJest has detected the following 1 open handle potentially keeping Jest from exiting:\n\n  â—  TCPSERVERWRAP\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 81 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m app\u001b[33m.\u001b[39mlisten(\u001b[33mPORT\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`HR System backend running on port ${PORT}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`Environment: ${process.env.NODE_ENV || 'development'}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 85 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Function.listen (node_modules/express/lib/application.js:605:24)\n      at Object.listen (src/app.js:82:5)\n      at Object.require (src/__tests__/auth.test.js:7:13)\n\n",
      "success": false
    },
    {
      "name": "å‘˜å·¥ç®¡ç†æ¨¡å—æµ‹è¯•",
      "error": "Command failed: npx jest C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\employees.test.js --json --coverage=false\n  console.log\n    [dotenv@17.2.3] injecting env (13) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  suppress all logs with { quiet: true }\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.warn\n    [2025-12-05T14:27:51.195Z] [WARN] DingTalk credentials not configured. Notification features will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/DingTalkService.js:26:14)\n      at Object.<anonymous> (src/services/DingTalkService.js:294:18)\n      at Object.require (src/services/NotificationService.js:13:25)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/employees.test.js:7:13)\n\n  console.warn\n    [2025-12-05T14:27:51.205Z] [WARN] Email configuration not found. Email notifications will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/NotificationService.js:31:14)\n      at Object.<anonymous> (src/services/NotificationService.js:462:18)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/employees.test.js:7:13)\n\n  console.log\n    Setting up test environment...\n\n      at Object.log (src/__tests__/setup.js:14:11)\n\n  console.log\n    HR System backend running on port 3001\n\n      at Server.log (src/app.js:83:11)\n\n  console.log\n    Environment: test\n\n      at Server.log (src/app.js:84:11)\n\n  console.log\n    Database connection established successfully.\n\n      at log (src/config/database.js:33:13)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.log\n    Cleaning up test environment...\n\n      at Object.log (src/__tests__/setup.js:19:11)\n\nFAIL src/__tests__/employees.test.js\n  Employee Management API\n    GET /api/employees\n      Ã— should return employee list with pagination (83 ms)\n      âˆš should require authentication (29 ms)\n      Ã— should support keyword search (26 ms)\n      Ã— should support sorting by employee_number ascending (25 ms)\n      Ã— should support sorting by employee_number descending (30 ms)\n      Ã— should support sorting by department name (25 ms)\n      Ã— should support sorting by entry_date (24 ms)\n      Ã— should support sorting by name (using name_hash) (24 ms)\n      Ã— should support sorting by status (27 ms)\n      Ã— should default to employee_number ASC when sort params not provided (25 ms)\n      Ã— should include department object in employee data (25 ms)\n    POST /api/employees\n      Ã— should create a new employee with encrypted data (25 ms)\n      Ã— should reject duplicate employee numbers (27 ms)\n      Ã— should validate required fields (24 ms)\n    GET /api/employees/:id\n      Ã— should return employee details (47 ms)\n      Ã— should return 404 for non-existent employee (23 ms)\n    PUT /api/employees/:id\n      Ã— should update employee information (24 ms)\n    DELETE /api/employees/:id\n      Ã— should delete employee (admin only) (47 ms)\n    POST /api/employees/import\n      Ã— should import employees from Excel file (28 ms)\n    GET /api/employees/export\n      Ã— should export employees to Excel (21 ms)\n\n  â— Employee Management API â€º GET /api/employees â€º should return employee list with pagination\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 60 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 61 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 62 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 63 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 64 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'items'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 65 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:62:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support keyword search\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 83 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 85 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 86 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 87 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:85:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by employee_number ascending\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 93 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 94 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 95 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 96 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 97 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mitems)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 98 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:95:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by employee_number descending\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 104 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 106 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 107 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 108 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 109 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:106:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by department name\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 114 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 115 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 116 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 117 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 118 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 119 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:116:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by entry_date\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 124 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 126 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 127 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 128 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:126:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by name (using name_hash)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 139 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:136:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should support sorting by status\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 144 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 146 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 147 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 149 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:146:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should default to employee_number ASC when sort params not provided\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 154 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 156 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 157 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 158 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 159 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:156:31)\n\n  â— Employee Management API â€º GET /api/employees â€º should include department object in employee data\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 164 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 165 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 166 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 167 |\u001b[39m       \u001b[36mif\u001b[39m (response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mitems\u001b[33m.\u001b[39mlength \u001b[33m>\u001b[39m \u001b[35m0\u001b[39m) {\n     \u001b[90m 168 |\u001b[39m         \u001b[36mconst\u001b[39m employee \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mitems[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 169 |\u001b[39m         \u001b[36mif\u001b[39m (employee\u001b[33m.\u001b[39mdepartment_id) {\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:166:31)\n\n  â— Employee Management API â€º POST /api/employees â€º should create a new employee with encrypted data\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 201\n    Received: 403\n\n    \u001b[0m \u001b[90m 197 |\u001b[39m         \u001b[33m.\u001b[39msend(newEmployee)\u001b[33m;\u001b[39m\n     \u001b[90m 198 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 199 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 200 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'employee_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 202 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39memployee_number)\u001b[33m.\u001b[39mtoBe(\u001b[32m'TEST001'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:199:31)\n\n  â— Employee Management API â€º POST /api/employees â€º should reject duplicate employee numbers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 400\n    Received: 403\n\n    \u001b[0m \u001b[90m 227 |\u001b[39m         \u001b[33m.\u001b[39msend(duplicate)\u001b[33m;\u001b[39m\n     \u001b[90m 228 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 229 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 230 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 231 |\u001b[39m\n     \u001b[90m 232 |\u001b[39m     it(\u001b[32m'should validate required fields'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:229:31)\n\n  â— Employee Management API â€º POST /api/employees â€º should validate required fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 400\n    Received: 403\n\n    \u001b[0m \u001b[90m 241 |\u001b[39m         \u001b[33m.\u001b[39msend(invalid)\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 243 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 244 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:243:31)\n\n  â— Employee Management API â€º GET /api/employees/:id â€º should return employee details\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39memployee_id)\u001b[33m.\u001b[39mtoBe(testEmployee\u001b[33m.\u001b[39memployee_id)\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39memployee_number)\u001b[33m.\u001b[39mtoBe(\u001b[32m'TEST001'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:271:31)\n\n  â— Employee Management API â€º GET /api/employees/:id â€º should return 404 for non-existent employee\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 404\n    Received: 403\n\n    \u001b[0m \u001b[90m 280 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 282 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 283 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 285 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:282:31)\n\n  â— Employee Management API â€º PUT /api/employees/:id â€º should update employee information\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 312 |\u001b[39m         \u001b[33m.\u001b[39msend(updates)\u001b[33m;\u001b[39m\n     \u001b[90m 313 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 314 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 315 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 316 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mposition)\u001b[33m.\u001b[39mtoBe(\u001b[32m'é«˜çº§æµ‹è¯•å·¥ç¨‹å¸ˆ'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/employees.test.js:314:31)\n\n  â— Employee Management API â€º DELETE /api/employees/:id â€º should delete employee (admin only)\n\n\n\n    \u001b[0m \u001b[90m 332 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 333 |\u001b[39m       tempEmployee\u001b[33m.\u001b[39msetName(\u001b[32m'ä¸´æ—¶å‘˜å·¥'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 334 |\u001b[39m       \u001b[36mawait\u001b[39m tempEmployee\u001b[33m.\u001b[39msave()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 335 |\u001b[39m\n     \u001b[90m 336 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 337 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/employees/${tempEmployee.employee_id}`\u001b[39m)\u001b[0m\n\n      at Query.run (node_modules/sequelize/src/dialects/mysql/query.js:46:25)\n      at node_modules/sequelize/src/sequelize.js:650:28\n      at MySQLQueryInterface.insert (node_modules/sequelize/src/dialects/abstract/query-interface.js:795:21)\n      at Employee.save (node_modules/sequelize/src/model.js:4154:35)\n      at Object.<anonymous> (src/__tests__/employees.test.js:334:7)\n\n  â— Employee Management API â€º POST /api/employees/import â€º should import employees from Excel file\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 403\n    Received array: [400, 500]\n\n    \u001b[0m \u001b[90m 356 |\u001b[39m\n     \u001b[90m 357 |\u001b[39m       \u001b[90m// Should fail due to invalid file, but endpoint should exist\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 358 |\u001b[39m       expect([\u001b[35m400\u001b[39m\u001b[33m,\u001b[39m \u001b[35m500\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 359 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 360 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 361 |\u001b[39m\u001b[0m\n\n      at Object.toContain (src/__tests__/employees.test.js:358:26)\n\n  â— Employee Management API â€º GET /api/employees/export â€º should export employees to Excel\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 403\n    Received array: [200, 404]\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m\n     \u001b[90m 368 |\u001b[39m       \u001b[90m// Route may not be implemented yet\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m       expect([\u001b[35m200\u001b[39m\u001b[33m,\u001b[39m \u001b[35m404\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[36mif\u001b[39m (response\u001b[33m.\u001b[39mstatus \u001b[33m===\u001b[39m \u001b[35m200\u001b[39m) {\n     \u001b[90m 371 |\u001b[39m         expect(response\u001b[33m.\u001b[39mheaders[\u001b[32m'content-type'\u001b[39m])\u001b[33m.\u001b[39mtoContain(\u001b[32m'spreadsheet'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 372 |\u001b[39m       }\u001b[0m\n\n      at Object.toContain (src/__tests__/employees.test.js:369:26)\n\nTest Suites: 1 failed, 1 total\nTests:       19 failed, 1 passed, 20 total\nSnapshots:   0 total\nTime:        1.905 s, estimated 2 s\nRan all test suites matching C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\employees.test.js.\n\nJest has detected the following 1 open handle potentially keeping Jest from exiting:\n\n  â—  TCPSERVERWRAP\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 81 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m app\u001b[33m.\u001b[39mlisten(\u001b[33mPORT\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`HR System backend running on port ${PORT}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`Environment: ${process.env.NODE_ENV || 'development'}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 85 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Function.listen (node_modules/express/lib/application.js:605:24)\n      at Object.listen (src/app.js:82:5)\n      at Object.require (src/__tests__/employees.test.js:7:13)\n\n",
      "success": false
    },
    {
      "name": "éƒ¨é—¨ç®¡ç†æ¨¡å—æµ‹è¯•",
      "error": "Command failed: npx jest C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\departments.test.js --json --coverage=false\n  console.log\n    [dotenv@17.2.3] injecting env (13) from .env -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.log\n    [dotenv@17.2.3] injecting env (0) from .env -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:142:11)\n\n  console.warn\n    [2025-12-05T14:27:54.715Z] [WARN] DingTalk credentials not configured. Notification features will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/DingTalkService.js:26:14)\n      at Object.<anonymous> (src/services/DingTalkService.js:294:18)\n      at Object.require (src/services/NotificationService.js:13:25)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/departments.test.js:7:13)\n\n  console.warn\n    [2025-12-05T14:27:54.724Z] [WARN] Email configuration not found. Email notifications will be disabled.\n\n    \u001b[0m \u001b[90m 33 |\u001b[39m   warn(message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs) {\n     \u001b[90m 34 |\u001b[39m     \u001b[36mif\u001b[39m (currentLevel \u001b[33m>=\u001b[39m \u001b[33mLOG_LEVELS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mWARN\u001b[39m) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 35 |\u001b[39m       console\u001b[33m.\u001b[39mwarn(formatMessage(\u001b[32m'WARN'\u001b[39m\u001b[33m,\u001b[39m message\u001b[33m,\u001b[39m \u001b[33m...\u001b[39margs))\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 36 |\u001b[39m     }\n     \u001b[90m 37 |\u001b[39m   }\u001b[33m,\u001b[39m\n     \u001b[90m 38 |\u001b[39m\u001b[0m\n\n      at Object.warn (src/utils/logger.js:35:15)\n      at new warn (src/services/NotificationService.js:31:14)\n      at Object.<anonymous> (src/services/NotificationService.js:462:18)\n      at Object.require (src/services/SchedulerService.js:15:29)\n      at Object.require (src/app.js:49:26)\n      at Object.require (src/__tests__/departments.test.js:7:13)\n\n  console.log\n    Setting up test environment...\n\n      at Object.log (src/__tests__/setup.js:14:11)\n\n  console.log\n    HR System backend running on port 3001\n\n      at Server.log (src/app.js:83:11)\n\n  console.log\n    Environment: test\n\n      at Server.log (src/app.js:84:11)\n\n  console.log\n    Database connection established successfully.\n\n      at log (src/config/database.js:33:13)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Invalid username or password',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.error\n    Error occurred: {\n      error: 'Account is locked due to too many failed login attempts',\n      stack: undefined,\n      path: '/api/auth/login',\n      method: 'POST'\n    }\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m \u001b[36mconst\u001b[39m errorHandler \u001b[33m=\u001b[39m (err\u001b[33m,\u001b[39m req\u001b[33m,\u001b[39m res\u001b[33m,\u001b[39m next) \u001b[33m=>\u001b[39m {\n     \u001b[90m 52 |\u001b[39m   \u001b[90m// Log error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m   console\u001b[33m.\u001b[39merror(\u001b[32m'Error occurred:'\u001b[39m\u001b[33m,\u001b[39m {\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m     error\u001b[33m:\u001b[39m err\u001b[33m.\u001b[39mmessage\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     stack\u001b[33m:\u001b[39m process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mNODE_ENV\u001b[39m \u001b[33m===\u001b[39m \u001b[32m'development'\u001b[39m \u001b[33m?\u001b[39m err\u001b[33m.\u001b[39mstack \u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m\n     \u001b[90m 56 |\u001b[39m     path\u001b[33m:\u001b[39m req\u001b[33m.\u001b[39mpath\u001b[33m,\u001b[39m\u001b[0m\n\n      at error (src/middleware/errorHandler.js:53:11)\n      at Layer.handleError (node_modules/router/lib/layer.js:116:17)\n      at trimPrefix (node_modules/router/index.js:340:13)\n      at node_modules/router/index.js:297:9\n      at processParams (node_modules/router/index.js:582:12)\n      at next (node_modules/router/index.js:291:5)\n      at node_modules/router/index.js:688:15\n      at next (node_modules/router/index.js:276:14)\n      at next (node_modules/router/lib/route.js:132:14)\n\n  console.log\n    Cleaning up test environment...\n\n      at Object.log (src/__tests__/setup.js:19:11)\n\nFAIL src/__tests__/departments.test.js\n  Department Management API\n    GET /api/departments\n      Ã— should return all departments with employee count (96 ms)\n      Ã— should return departments sorted by name (38 ms)\n      âˆš should require authentication (32 ms)\n      Ã— should include department details (26 ms)\n    GET /api/departments/:id\n      Ã— should return department by ID (25 ms)\n      Ã— should return 404 for non-existent department (23 ms)\n    POST /api/departments\n      Ã— should create a new department (27 ms)\n      Ã— should reject duplicate department code (23 ms)\n      Ã— should validate required fields (24 ms)\n      âˆš should require admin or hr role (28 ms)\n    PUT /api/departments/:id\n      Ã— should update department information (51 ms)\n      Ã— should return 404 for non-existent department (25 ms)\n    DELETE /api/departments/:id\n      Ã— should delete department (admin only) (28 ms)\n      Ã— should prevent deletion of department with employees (24 ms)\n    Department Hierarchy\n      Ã— should support parent-child relationships (32 ms)\n    Department Statistics\n      Ã— should include employee count in department list (21 ms)\n\n  â— Department Management API â€º GET /api/departments â€º should return all departments with employee count\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 48 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 49 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 50 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 51 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 52 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 53 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:50:31)\n\n  â— Department Management API â€º GET /api/departments â€º should return departments sorted by name\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 63 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 64 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 65 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 66 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 67 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 68 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:65:31)\n\n  â— Department Management API â€º GET /api/departments â€º should include department details\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 81 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 82 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 83 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 84 |\u001b[39m       \u001b[36mconst\u001b[39m department \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 85 |\u001b[39m       expect(department)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'department_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m       expect(department)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:83:31)\n\n  â— Department Management API â€º GET /api/departments/:id â€º should return department by ID\n\n    TypeError: Cannot read properties of undefined (reading '0')\n\n    \u001b[0m \u001b[90m  96 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  97 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  98 |\u001b[39m       \u001b[36mconst\u001b[39m departmentId \u001b[33m=\u001b[39m listResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mdepartment_id\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  99 |\u001b[39m\n     \u001b[90m 100 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\n     \u001b[90m 101 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/departments/${departmentId}`\u001b[39m)\u001b[0m\n\n      at Object.<anonymous> (src/__tests__/departments.test.js:98:50)\n\n  â— Department Management API â€º GET /api/departments/:id â€º should return 404 for non-existent department\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 404\n    Received: 403\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 113 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 117 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:114:31)\n\n  â— Department Management API â€º POST /api/departments â€º should create a new department\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 201\n    Received: 403\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m         \u001b[33m.\u001b[39msend(newDepartment)\u001b[33m;\u001b[39m\n     \u001b[90m 129 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'department_id'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'æµ‹è¯•éƒ¨é—¨A'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:130:31)\n\n  â— Department Management API â€º POST /api/departments â€º should reject duplicate department code\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 400\n    Received: 403\n\n    \u001b[0m \u001b[90m 148 |\u001b[39m         \u001b[33m.\u001b[39msend(duplicate)\u001b[33m;\u001b[39m\n     \u001b[90m 149 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 150 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 151 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m\n     \u001b[90m 153 |\u001b[39m     it(\u001b[32m'should validate required fields'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:150:31)\n\n  â— Department Management API â€º POST /api/departments â€º should validate required fields\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 400\n    Received: 403\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m         \u001b[33m.\u001b[39msend(invalid)\u001b[33m;\u001b[39m\n     \u001b[90m 163 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n     \u001b[90m 167 |\u001b[39m     it(\u001b[32m'should require admin or hr role'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:164:31)\n\n  â— Department Management API â€º PUT /api/departments/:id â€º should update department information\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 210 |\u001b[39m         \u001b[33m.\u001b[39msend(updates)\u001b[33m;\u001b[39m\n     \u001b[90m 211 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 212 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 213 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'æ›´æ–°åŽçš„æµ‹è¯•éƒ¨é—¨'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 215 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:212:31)\n\n  â— Department Management API â€º PUT /api/departments/:id â€º should return 404 for non-existent department\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 404\n    Received: 403\n\n    \u001b[0m \u001b[90m 224 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 226 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 227 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 228 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:226:31)\n\n  â— Department Management API â€º DELETE /api/departments/:id â€º should delete department (admin only)\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 241 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 243 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 244 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m\n     \u001b[90m 246 |\u001b[39m       \u001b[90m// Verify deletion\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:243:31)\n\n  â— Department Management API â€º DELETE /api/departments/:id â€º should prevent deletion of department with employees\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 403\n    Received array: [404, 400]\n\n    \u001b[0m \u001b[90m 256 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 257 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 258 |\u001b[39m       expect([\u001b[35m404\u001b[39m\u001b[33m,\u001b[39m \u001b[35m400\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 259 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 261 |\u001b[39m\u001b[0m\n\n      at Object.toContain (src/__tests__/departments.test.js:258:26)\n\n  â— Department Management API â€º Department Hierarchy â€º should support parent-child relationships\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 282 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 283 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 284 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 285 |\u001b[39m\n     \u001b[90m 286 |\u001b[39m       \u001b[90m// Cleanup\u001b[39m\n     \u001b[90m 287 |\u001b[39m       \u001b[36mawait\u001b[39m \u001b[33mDepartment\u001b[39m\u001b[33m.\u001b[39mdestroy({ where\u001b[33m:\u001b[39m { department_id\u001b[33m:\u001b[39m childDept\u001b[33m.\u001b[39mdepartment_id }\u001b[33m,\u001b[39m force\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:284:31)\n\n  â— Department Management API â€º Department Statistics â€º should include employee count in department list\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 403\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       \u001b[90m// Department may or may not have employee_count depending on implementation\u001b[39m\n     \u001b[90m 300 |\u001b[39m       \u001b[90m// Just verify the response structure is valid\u001b[39m\n     \u001b[90m 301 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/__tests__/departments.test.js:298:31)\n\nTest Suites: 1 failed, 1 total\nTests:       14 failed, 2 passed, 16 total\nSnapshots:   0 total\nTime:        1.757 s, estimated 2 s\nRan all test suites matching C:\\Users\\tonyh\\Desktop\\hrsystem\\backend\\src\\__tests__\\departments.test.js.\n\nJest has detected the following 1 open handle potentially keeping Jest from exiting:\n\n  â—  TCPSERVERWRAP\n\n    \u001b[0m \u001b[90m 80 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 81 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 82 |\u001b[39m app\u001b[33m.\u001b[39mlisten(\u001b[33mPORT\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 83 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`HR System backend running on port ${PORT}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 84 |\u001b[39m   console\u001b[33m.\u001b[39mlog(\u001b[32m`Environment: ${process.env.NODE_ENV || 'development'}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 85 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Function.listen (node_modules/express/lib/application.js:605:24)\n      at Object.listen (src/app.js:82:5)\n      at Object.require (src/__tests__/departments.test.js:7:13)\n\n",
      "success": false
    }
  ]
}