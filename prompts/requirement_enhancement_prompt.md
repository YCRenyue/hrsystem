# HR管理系统需求深化提示词

## 📋 背景说明

基于现有的HR管理系统基础架构和需求分析，需要进一步细化以下核心领域：
1. **业务流程设计** - 详细的员工入职、信息管理、审批流程
2. **前端页面设计** - 关键用户界面和交互体验设计
3. **文件存储策略** - 身份证复印件等敏感文档的安全存储方案

## 🎯 任务目标

请基于以下维度深化HR管理系统的requirement.md：

### 一、业务流程深化

#### 1.1 员工入职完整流程
```
需要详细设计：
- HR录入员工基础信息后的完整工作流
- 自动化入职通知的触发机制和重试策略
- 员工填写入职表单的分步骤流程
- 文档上传和审核的完整链路
- 试用期管理和转正流程
- 钉钉账号创建和权限分配流程
```

#### 1.2 文档管理流程
```
需要设计：
- 身份证复印件上传→OCR识别→加密存储→审核批准的完整流程
- 文档版本管理和历史记录追踪
- 敏感文档的查看权限控制机制
- 文档过期提醒和更新流程
- 批量文档处理和导入导出流程
```

#### 1.3 权限管理流程
```
需要设计：
- 三级权限系统的具体权限分配策略
- 部门经理对下属员工信息的访问控制
- 跨部门协作时的临时权限申请流程
- 权限变更的审批和生效机制
```

### 二、关键前端页面设计

#### 2.1 员工信息录入页面
```
页面功能需求：
- 分步骤表单设计（基础信息→联系方式→工作信息→文档上传）
- 实时表单验证和错误提示
- 支持Excel批量导入的可视化界面
- 自动填充功能（如根据身份证号自动计算年龄、星座等）
- 表单草稿保存和恢复功能
- 移动端适配的响应式设计

UI/UX要求：
- 清晰的步骤指示器
- 友好的错误处理和用户引导
- 支持键盘快捷操作
- 无障碍访问支持
```

#### 2.2 员工信息管理页面
```
页面功能需求：
- 高级搜索和筛选功能（部门、职位、入职时间、状态等）
- 可定制的列表视图（显示/隐藏字段、排序、分组）
- 批量操作功能（导出、状态更新、发送通知）
- 员工详情侧边栏或弹窗
- 数据脱敏显示（根据用户权限）
- 实时数据更新和同步

数据展示要求：
- 员工头像和基础信息卡片
- 入职进度可视化
- 部门组织架构树形视图
- 统计图表和数据大屏
```

#### 2.3 入职流程管理页面
```
页面功能需求：
- 入职流程看板视图（待发送、进行中、已完成、已过期）
- 流程模板管理和自定义配置
- 批量发送入职通知功能
- 流程进度跟踪和提醒设置
- 异常处理和重新发送机制
- 流程分析和报告功能

交互设计要求：
- 拖拽式流程设计器
- 实时状态更新和通知
- 移动端入职表单优化
- 多语言支持
```

#### 2.4 文档管理页面
```
页面功能需求：
- 文档分类和标签管理
- 在线预览和下载功能
- 文档审核工作流界面
- 版本对比和历史查看
- 批量上传和处理
- 文档搜索和全文检索

安全功能要求：
- 水印和防截屏保护
- 查看日志和访问记录
- 权限级别可视化标识
- 敏感信息遮罩显示
```

### 三、文件存储策略设计

#### 3.1 对象存储桶结构设计
```
需要设计存储桶组织架构：

/hrsystem-documents/
├── employees/
│   ├── {employee_id}/
│   │   ├── id-cards/          # 身份证复印件
│   │   │   ├── original/      # 原始文件
│   │   │   ├── encrypted/     # 加密后文件
│   │   │   └── thumbnails/    # 缩略图
│   │   ├── contracts/         # 合同文件
│   │   ├── certificates/      # 证书文件
│   │   ├── photos/           # 照片文件
│   │   └── others/           # 其他文档
├── templates/                 # 模板文件
├── backups/                  # 备份文件
└── temp/                     # 临时文件

存储路径规范：
- 路径格式：/{bucket}/employees/{employee_id}/{document_type}/{file_id}.{ext}
- 加密文件：/{bucket}/employees/{employee_id}/{document_type}/encrypted/{file_id}.enc
- 访问URL：https://cdn.company.com/secure/{signed_token}/{file_path}
```

#### 3.2 数据库文件信息存储
```sql
-- 文件存储表结构增强
ALTER TABLE employee_documents ADD COLUMN (
    `storage_provider` ENUM('oss', 'cos', 's3', 'minio') NOT NULL DEFAULT 'oss' COMMENT '存储供应商',
    `bucket_name` VARCHAR(100) NOT NULL COMMENT '存储桶名称',
    `object_key` VARCHAR(500) NOT NULL COMMENT '对象存储键值',
    `cdn_url` VARCHAR(500) COMMENT 'CDN访问地址',
    `file_hash` VARCHAR(64) COMMENT '文件哈希值',
    `encrypted_key` VARCHAR(255) COMMENT '文件加密密钥',
    `access_policy` JSON COMMENT '访问策略配置',
    `retention_policy` JSON COMMENT '保留策略配置',
    `backup_status` ENUM('pending', 'completed', 'failed') DEFAULT 'pending' COMMENT '备份状态'
);

-- 文件访问日志表
CREATE TABLE `file_access_logs` (
    `log_id` VARCHAR(36) PRIMARY KEY,
    `document_id` VARCHAR(36) NOT NULL,
    `user_id` VARCHAR(36) NOT NULL,
    `access_type` ENUM('view', 'download', 'upload', 'delete') NOT NULL,
    `ip_address` VARCHAR(45),
    `user_agent` TEXT,
    `access_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `success` BOOLEAN DEFAULT TRUE,
    `error_message` TEXT,
    FOREIGN KEY (`document_id`) REFERENCES `employee_documents`(`document_id`),
    FOREIGN KEY (`user_id`) REFERENCES `users`(`user_id`)
);
```

#### 3.3 文件安全策略
```
加密存储方案：
- 文件上传时使用AES-256-GCM加密
- 每个文件使用独立的加密密钥
- 密钥存储在独立的密钥管理服务中
- 支持密钥轮换和版本管理

访问控制方案：
- 基于角色的访问控制（RBAC）
- 临时访问链接（有效期可配置）
- 访问频率限制和异常检测
- 水印和防下载保护

备份策略：
- 多地域备份存储
- 定期备份完整性校验
- 灾难恢复预案
- 数据生命周期管理
```

### 四、技术实现细节

#### 4.1 文件上传流程
```
1. 前端文件选择和预处理
   - 文件类型和大小验证
   - 图像压缩和格式转换
   - 进度条和上传状态显示

2. 后端文件处理
   - 文件安全扫描（病毒检测）
   - OCR文字识别（身份证信息提取）
   - 文件加密和存储
   - 缩略图生成

3. 数据库记录
   - 文件元信息保存
   - 访问权限设置
   - 审核流程触发
```

#### 4.2 OCR身份证识别
```
技术方案：
- 使用阿里云OCR或腾讯云OCR服务
- 身份证正反面自动识别
- 信息准确性校验
- 敏感信息自动脱敏

实现流程：
1. 图像预处理（去噪、纠偏、增强）
2. OCR文字识别和结构化输出
3. 身份证号码校验（校验码算法）
4. 与用户填写信息交叉验证
5. 异常情况人工审核
```

#### 4.3 移动端优化
```
移动端特殊考虑：
- 拍照上传身份证功能
- 离线表单填写和同步
- 推送通知集成
- 移动端权限适配
- 网络状况适应性优化
```

## 🔧 输出要求

基于以上提示词，请更新和完善：

1. **requirement.md文件**
   - 补充详细的业务流程图
   - 添加前端页面原型设计说明
   - 完善文件存储技术方案

2. **新增业务流程文档**
   - 创建 `docs/business-process.md`
   - 包含完整的工作流程图
   - 异常处理和回滚机制

3. **新增页面设计文档**
   - 创建 `docs/ui-design.md`
   - 详细的页面布局和交互设计
   - 用户体验优化方案

4. **新增文件存储文档**
   - 创建 `docs/file-storage.md`
   - 对象存储配置和安全策略
   - 文件生命周期管理

## 💡 扩展考虑

在设计时请特别关注：

1. **合规性要求**
   - 个人信息保护法(PIPL)合规
   - 数据跨境传输规定
   - 审计追踪要求

2. **用户体验**
   - 无障碍访问支持
   - 国际化和本地化
   - 性能优化和加载速度

3. **系统扩展性**
   - 微服务架构支持
   - API版本管理
   - 第三方系统集成能力

4. **运维监控**
   - 系统健康检查
   - 性能指标监控
   - 异常告警机制

---

**使用说明**：将此提示词作为进一步完善HR管理系统需求的指导，确保系统设计的完整性和实用性。
